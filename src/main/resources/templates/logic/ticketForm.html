<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Создать заявку</title>
    <link rel="stylesheet" href="/form.css">
</head>
<body>
<header>
    <div class="logo">
        <h1>Онлайн адвокат</h1>
    </div>
</header>

<section id="form-section">
    <h2>Заполните форму для создания заявки</h2>
    <form id="create-ticket-form" action="/submit-ticket" method="POST">
        <div class="form-group">
            <label for="firstName">Имя:</label>
            <input type="text" id="firstName" name="firstName" placeholder="Введите ваше имя" required>
        </div>
        <div class="form-group">
            <label for="lastName">Фамилия:</label>
            <input type="text" id="lastName" name="lastName" placeholder="Введите вашу фамилию" required>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="Введите ваш email" required>
        </div>
        <div class="form-group">
            <label for="phone">Номер телефона:</label>
            <input type="tel" id="phone" name="phone" placeholder="Введите ваш номер телефона" required>
        </div>
        <button type="submit">Отправить</button>
    </form>
</section>

<script>
    document.getElementById("create-ticket-form").onsubmit = function(event) {
        event.preventDefault(); // Отменяем стандартное отправление формы

        const formData = {
            name: document.getElementById("firstName").value,
            surname: document.getElementById("lastName").value,
            email: document.getElementById("email").value,
            phone: document.getElementById("phone").value
        };

        // Логирование данных, которые отправляются на сервер
        console.log("Отправляемые данные:", JSON.stringify(formData));

        fetch('/submit-ticket', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json', // Устанавливаем правильный Content-Type
            },
            body: JSON.stringify(formData) // Отправляем данные как JSON
        })
        .then(response => {
            if (response.ok) {
                alert("Заявка успешно отправлена!");
            } else {
                alert("Ошибка при отправке заявки.");
            }
        })
        .catch(error => {
            console.error('Ошибка:', error);
            alert("Произошла ошибка.");
        });
    };
</script>

</body>
</html>
